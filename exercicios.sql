ALTER DATABASE OPEN

CREATE TABLE PROFESSORES (
    PROFESSOR_ID NUMBER GENERATED BY DEFAULT AS IDENTITY,
    NOME VARCHAR2(64) NOT NULL,
    SOBRENOME VARCHAR2(64) NOT NULL,
    ID_ENDERECO NUMBER NOT NULL,
    TELEFONE VARCHAR2(14) NOT NULL,
    EMAIL VARCHAR2(100) NOT NULL,
    DATA_NASCIMENTO DATE NOT NULL,
    NACIONALIDADE VARCHAR2(50) NOT NULL
);

CREATE TABLE ENDERECO (
    ENDERECO_ID NUMBER GENERATED BY DEFAULT AS IDENTITY,
    LOGRADOURO VARCHAR2(64) NOT NULL,
    NUMERO VARCHAR2(10) NOT NULL,
    COMPLEMENTO VARCHAR2(64),
    BAIRRO VARCHAR2(64) NOT NULL,
    ESTADO VARCHAR2(64) NOT NULL
);

CREATE TABLE ESTUDANTES (
    ESTUDANTE_ID NUMBER GENERATED BY DEFAULT AS IDENTITY,
    NOME VARCHAR2(64) NOT NULL,
    SOBRENOME VARCHAR2(64) NOT NULL,
    MATRICULA NUMBER NOT NULL,
    EMAIL VARCHAR2(100) NOT NULL,
    DATA_NASCIMENTO DATE NOT NULL,
    NACIONALIDADE VARCHAR2(50) NOT NULL,
    MEDIA_GERAL NUMBER(5,1) NOT NULL
);

CREATE TABLE CURSOS (
    CURSO_ID NUMBER GENERATED BY DEFAULT AS IDENTITY,
    NOME VARCHAR2(64) NOT NULL,
    CATEGORIA VARCHAR2(64) NOT NULL,
    PROFESSOR VARCHAR2(100) NOT NULL,
    NUMERO_MAX_ALUNOS NUMBER(5,1) NOT NULL
);

CREATE TABLE MATRICULA_CURSO (
    MATRICULA_CURSO_ID NUMBER GENERATED BY DEFAULT AS IDENTITY,
    ESTUDANTE_ID NUMBER NOT NULL,
    CURSO_ID NUMBER NOT NULL,
    MEDIA NUMBER(5,1)
);

ALTER TABLE PROFESSORES ADD PRIMARY KEY (PROFESSOR_ID);
ALTER TABLE ENDERECO ADD PRIMARY KEY (ENDERECO_ID);
ALTER TABLE ESTUDANTES ADD PRIMARY KEY (ESTUDANTE_ID);
ALTER TABLE CURSOS ADD PRIMARY KEY (CURSO_ID);
ALTER TABLE MATRICULA_CURSO ADD PRIMARY KEY (MATRICULA_CURSO_ID);

ALTER TABLE PROFESSORES RENAME COLUMN ID_ENDERECO TO ENDERECO_ID;

ALTER TABLE PROFESSORES ADD FOREIGN KEY(ENDERECO_ID) REFERENCES ENDERECO(ENDERECO_ID);
ALTER TABLE MATRICULA_CURSO ADD FOREIGN KEY(ESTUDANTE_ID) REFERENCES ESTUDANTES(ESTUDANTE_ID);
ALTER TABLE MATRICULA_CURSO ADD FOREIGN KEY(CURSO_ID) REFERENCES CURSOS(CURSO_ID);